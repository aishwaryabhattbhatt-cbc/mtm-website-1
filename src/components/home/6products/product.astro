---
/* src/components/home/5-solutions/solutions.astro */
import './product.css';

import ProductCards from '../../home/6products/ProductCards.astro';
import { productData } from './product.js'; // Import data for HTML

import Tools from "../../home/6products/tools.astro";

// Update this line to match the props passed from index.astro
const { 
  titleHighlight, 
  titleBase, 
  description, 
  dynamicData 
} = Astro.props;

// Merge hardcoded IDs/Tools with CSV text [cite: 66, 71]
const mergedProducts = productData.map(staticProd => {
  const dynamic = dynamicData.find(d => d.id === staticProd.id);
  return {
    ...staticProd,
    subtitle: dynamic?.subtitle || staticProd.subtitle,
    description: dynamic?.description || staticProd.description
  };
});

---

<section class="section-products">
  <div class="page-inner products-container">
    {/* Header Block */}
    <div class="products-header">
      <h2 class="h2">
        <span class="hl-text highlight-2">{titleHighlight}</span>{titleBase}
      </h2>
      <p class="products-desc body-m">{description}</p>
    </div>

    <div class="products-stage">
       {/* Product Image Block */}
      <div class="products-hero-image">
        <img id="products-hero-img" src="/mtm-website-1/images/products/18-hero.png" alt="" />
      </div>

      <div class="product-types">
        {mergedProducts.map((role) => (
          <ProductCards
            {...role}
            isActive={role.id === "18"}
            heroImage={`/mtm-website-1/images/products/${role.id}-hero.png`}
            tools={role.tools}
          />
        ))}
      </div>

    {/* Tools Block */}
      <Tools />
    </div>
  </div>
</section>


<script>
  import { startProducts } from './product.js';
  startProducts();
</script>
  