---
// src/components/home/Reports/Reports.astro

import Tools from '../../solutions/solution-reports/tools.astro';
import ProductToggle from '../../ui/ProductToggle/product-toggle.astro';
import ReportInfo from '../../solutions/solution-reports/reportinfo.astro';

// 1. DATA: Edit your section text here
const titlePart1 = "Latest from the MTM";
const description = "Whether you're tracking fast-moving trends, understanding audiences, or making strategic decisions, MTM provides the clear evidence you need. Our reports distill nationwide media and technology behaviour into clear, actionable insights.";
const buttonText = "Learn More about 18+";

// 2. STYLES: Local CSS import
import './reports.css';
---

<section class="section-reports">
  <div class="reports-container">
    <div class="reports-header">
      <h2 class="h2">{titlePart1}</span></h2>
      
    </div>
      
    <div class="report-block">

      <div class="toggle">
        <ProductToggle options={["MTM", "Junior", "Newcomers"]} active="MTM" />

        <a href="/mtm-website-1/en/insights" class="btn-tertiary button-l">
          {buttonText}
        </a>
      </div>


      <div class="reports-image">
        <img src="/mtm-website-1/reports 1.png" alt="Reports Section" />
      </div>

      <div class="reports-info">
          <ReportInfo />
      </div>

      <div class="reports-tools-container">
          <Tools />
      </div>
    </div>

  </div>
    
</section>

<!-- <script>
  import { updateReportsUI } from './tools.js';

  // This connects to the 'dispatchEvent' inside product-toggle.js
  document.addEventListener('productToggle:change', (event) => {
    // We cast to CustomEvent to access the 'detail' property
    const customEvent = event as CustomEvent;
    const selectedProduct = customEvent.detail.value;
    
    // Tell our tools logic to update the UI
    updateReportsUI(selectedProduct);
  });

  // Default initialization
  document.addEventListener('DOMContentLoaded', () => {
    updateReportsUI("MTM");
  });
</script> -->

<script>
  import { updateReportsUI } from './tools.js'; // Handles icons and images
  import { updateReportInfo } from './reportinfo.js'; // Handles the 3-column text

  // Catch the toggle event and trigger both separate JS files
  document.addEventListener('productToggle:change', (event) => {
    const customEvent = event as CustomEvent;
    const selectedId = customEvent.detail.value;
    
    updateReportsUI(selectedId);   // Update Tools & Main Image
    updateReportInfo(selectedId); // Update 3-Column Info
  });

  // Initialize both on load
  document.addEventListener('DOMContentLoaded', () => {
    updateReportsUI("MTM");
    updateReportInfo("MTM");
  });
</script>